<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-Do List</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body id="body">
    <h1>Yokoso</h1>

    <button onclick="toggleTheme()" id="themeBtn">Switch to Dark Mode</button>

    <ul>
        {% for t in tasks %}
            <li>
                <form method="POST" action="{{ url_for('complete_tasks') }}" style="display:inline;">
                    <input type="checkbox"
                           name="taskCheckbox"
                           value="{{ loop.index0 }}"
                           {% if t.completed %}checked{% endif %}
                           onchange="this.form.submit()">
                    {{ t.name }}
                </form>

                <form method="POST" action="{{ url_for('delete_task', index=loop.index0) }}" style="display:inline;">
                    <button class="deleteBtn" type="submit">Delete</button>
                </form>
            </li>
        {% endfor %}
    </ul>

    <form method="POST" action="{{ url_for('add_task') }}">
        <label for="newTask">Add Task:</label>
        <input type="text" id="newTask" name="newTask" required>
        <button type="submit">Add</button>
    </form>

    <script>
        const body = document.getElementById("body");
        const themeBtn = document.getElementById("themeBtn");

        let savedTheme = localStorage.getItem("theme") || "light";
        body.classList.add(savedTheme);
        themeBtn.textContent = savedTheme === "dark" ? "Switch to Light Mode" : "Switch to Dark Mode";

        function toggleTheme() {
            if (body.classList.contains("light")) {
                body.classList.replace("light", "dark");
                localStorage.setItem("theme", "dark");
                themeBtn.textContent = "Switch to Light Mode";
            } else {
                body.classList.replace("dark", "light");
                localStorage.setItem("theme", "light");
                themeBtn.textContent = "Switch to Dark Mode";
            }
        }
    </script>
</body>
</html>